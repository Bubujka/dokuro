Как начать работать

На компьютере разработчика:
- Ставим virtualbox
- Ставим vagrant
- Ставим git 
- Клонируем этот репозиторий
- В папку prj клонируем нужные репозитории для разработки
  Для некоторых проектов нужна база MySQL - создаём файл prj/$prjname/dump.sql 
  или кладём изначальный дамп 
- Запускаем команду 'vagrant up'

------

У каждого проекта должен быть файл nginx.conf

Как минимум следующего вида

index index.php;
include php_fastcgi;

------

Ещё команды
vagrant halt - выключить виртуалку 
vagrant destroy - снести виртуалку
vagrant ssh - зайти на виртуалку

------

Сайты становятся доступны по адресу http://$prjname.dokuro.ru/

------

Виртуалка висит на порту 192.168.56.66 (http://dokuro.ru)

------

Настройки MySQL передаются из окружения -> сайту. Вот как их можно использовать:

if(!function_exists('_db_config')){
  function _db_config($p){
    $t = parse_url($_SERVER['MYSQL_DATABASE']);
    return trim($t[$p], '/');
  }
}

'mysql' => array(
  'driver'   => 'mysql',
  'host'     => _db_config('host'),
  'database' => _db_config('path'),
  'username' => _db_config('user'),
  'password' => _db_config('pass'),
  'charset'  => 'utf8',
  'prefix'   => '',
),
